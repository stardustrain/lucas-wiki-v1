---
title: Test double
meta:
  - name: description
    content: Unit test에 필요한 개념인 test double에 대한 개념을 알아봅니다.
  - name: keywords
    content: unit test, javascript, mocha, react test, enzyme, test double, mock, stub, fake, spy
  - property: og:title
    content: Test double
  - property: og:description
    content: Unit test에 필요한 개념인 test double에 대한 개념을 알아봅니다.
  - property: og:url
    content: https://wiki.lucashan.space/basic/02.test-double.html
---
# 02. Test double

`개인의 생각이 강하게 들어가 있는 글 입니다. 더 좋은 생각이 있으시면 lucas.han.public@gmail.com으로 메일 주세요. 언제나 환영합니다.`

## 1. Test double?
[이전 글](http://localhost:8080/basic/01.unit-test-basic.html#_4-test-double)에서 테스트 더블의 필요성과 개념에 대해 간단한 설명만 했었다. 다시 읽어보기 귀찮은 사람들은 **모든 테스트는 섬이어야 한다** 라는 이유 때문이라는 것만 기억하면 좋을 것 같다. 불필요한 DB연결이나 API호출 등을 피하는 것이다. 만약 이런 과정이 없다면 단지 테스트만을 위해 테스트용 DB를 만들거나 따로 API서버를 구축해야하는 불편함이 발생한다.

테스트 더블은 결국 외부로 부터 *독립적*이어야하기에 필요한 대역(Stunt double)이라고 보면 될 것 같다. 아래에서 소개할 개념들과 예제는 [Best Practices for Spies, Stubs and Mocks in Sinon.js](https://semaphoreci.com/community/tutorials/best-practices-for-spies-stubs-and-mocks-in-sinon-js)라는 글을 참고하여 작성하였다.

## 2. Stub
Stub은 미리 정해져있는 임의값을 반환하는 짧은 코드이다. 원래의 복잡한 구현을 최대한 *단순한 것으로 대체*하는 역할을 한다고 생각하면 괜찮을 것 같다. 몇 가지 일반적인 용도를 소개하자면 다음과 같다.

- 테스트가 어려운 코드 조각 대체
- 오류 처리나 잘 호출되지않는 부분을 쉽게 호출
- 비동기 코드를 쉽게 테스트

Stub은 결국 문제가 되는 부분을 대신해주어 테스트를 좀 더 쉽게 만들어 주는 역할을 한다.

```javascript
// function
const 
```

---
#### 참고
- [Sinon.js의 spy, stub, mock 의 Best Practice](https://tiffany.devpools.kr/2018/03/19/sinon/)
- [Best Practices for Spies, Stubs and Mocks in Sinon.js](https://semaphoreci.com/community/tutorials/best-practices-for-spies-stubs-and-mocks-in-sinon-js)
- [단위 테스트 케이스와 테스트 더블(Test Double)](https://medium.com/@SlackBeck/%EB%8B%A8%EC%9C%84-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BC%80%EC%9D%B4%EC%8A%A4%EC%99%80-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EB%8D%94%EB%B8%94-test-double-2b88cccd6a96)
- 도서 [Effective unit testing](http://www.hanbit.co.kr/store/books/look.php?p_code=B1467412848)